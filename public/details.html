<div id="link-details"></div>

<script>
  async function loadLinkDetails() {
    const res = await fetch('/api/links'); // or your actual endpoint
    const links = await res.json();

    const container = document.getElementById('link-details');
    container.innerHTML = '';

    links.forEach(link => {
      const linkDiv = document.createElement('div');
      linkDiv.innerHTML = `
        <h3>ðŸ”— ${link.originalUrl}</h3>
        <p><strong>Tracking ID:</strong> ${link.trackingId}</p>
        <p><strong>Total Clicks:</strong> ${link.clicks.length}</p>
        <table border="1" cellpadding="5">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>IP</th>
              <th>Device</th>
              <th>Country</th>
              <th>Location (GPS)</th>
              <th>Accuracy</th>
              <th>Source</th>
            </tr>
          </thead>
          <tbody>
            ${link.clicks.map(click => `
              <tr>
                <td>${new Date(click.timestamp).toLocaleString()}</td>
                <td>${click.ip}</td>
                <td>${click.deviceType}</td>
                <td>${click.country}</td>
                <td>${click.location?.lat}, ${click.location?.lng}</td>
                <td>${click.location?.accuracy}m</td>
                <td>${click.location?.source}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
        <hr/>
      `;
      container.appendChild(linkDiv);
    });
  }

  loadLinkDetails();
</script>